{"version":3,"sources":["contexts/CurrentUserContext.js","utils/api.js","utils/auth.js","components/Card.js","components/Main.js","components/Header.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/ProtectedRoute.js","components/AuthForm.js","components/Register.js","components/Login.js","images/ok.svg","images/err.svg","components/InfoTooltip.js","components/App.js","index.js"],"names":["CurrentUserContext","createContext","api","url","headers","this","_url","_headers","res","ok","json","Promise","reject","status","all","getUserInfo","getInitialCards","data","fetch","method","body","JSON","stringify","avatar","then","_getStatus","name","about","card","link","cardId","id","like","localStorage","getItem","BASE_URL","Card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","className","onClick","type","alt","src","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","map","reverse","Header","email","onSignOut","path","to","exact","Footer","Date","getFullYear","ImagePopup","isClose","PopupWithForm","title","isOpen","onClose","children","onSubmit","buttonText","action","defaultValue","AddPlacePopup","isLoading","useState","setTitle","setLink","useEffect","e","preventDefault","htmlFor","value","onChange","target","placeholder","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","EditProfilePopup","onUpdateProfile","setName","setAbout","ProtectedRoute","Component","component","props","loggedIn","AuthForm","btnText","password","handleChangeEmail","handleChangePassword","handleSubmit","pattern","autoComplete","Register","onRegister","setEmail","setPassword","Login","onLogin","InfoTooltip","isSuccess","aria-label","okIcon","errIcon","msg","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","infoTooltipPopup","setInfoTooltipPopup","setIsSuccess","history","useHistory","setIsLoading","handleConfirmRegister","bool","closeAllPopups","getServerData","userData","initialCards","catch","error","console","log","tokenCheck","useCallback","token","jwt","Authorization","Error","push","err","Provider","removeItem","setItem","message","login","register","likeCard","newCard","c","deleteCard","filter","setUserInfo","finally","item","addCard","updateAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.72538802.chunk.js","sourcesContent":["import { createContext } from 'react'\n\nexport const CurrentUserContext = createContext()\n","class Api {\n  constructor({ url, headers }) {\n    this._url = url\n    this._headers = headers\n  }\n\n  // Обработка ответа сервера\n  _getStatus(res) {\n    if (res.ok) {\n      return res.json()\n    } else {\n      return Promise.reject(`Error! : ${res.status}`)\n    }\n  }\n\n  getServerData() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()])\n  }\n\n  // Обновить аватар\n  updateAvatar(data) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      }),\n    }).then(this._getStatus)\n  }\n\n  // Запросить информацию о пользователе\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      headers: this._headers,\n    }).then(this._getStatus)\n  }\n\n  // Обновить информацию о пользователе\n  setUserInfo(data) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      }),\n    }).then(this._getStatus)\n  }\n\n  // Запросить карточки\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: 'GET',\n      headers: this._headers,\n    }).then(this._getStatus)\n  }\n\n  // Загрузить карточку на сервер\n  addCard(card) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: card.name,\n        link: card.link,\n      }),\n    }).then(this._getStatus)\n  }\n\n  // Удалить карточку\n  deleteCard(cardId) {\n    return fetch(`${this._url}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    }).then(this._getStatus)\n  }\n\n  // Лайк карточки\n  likeCard(id, like) {\n    return fetch(`${this._url}/cards/${id}/likes`, {\n      method: like ? 'PUT' : 'DELETE',\n      headers: this._headers,\n    }).then(this._getStatus)\n  }\n}\n\nexport const api = new Api({\n  url:'https://api.mesto.boev.nomoredomains.club',\n  headers: {\n    'Authorization': localStorage.getItem('jwt'),\n    'Content-Type': 'application/json'}\n});\n","export const BASE_URL = 'https://api.mesto.boev.nomoredomains.club'\n\nexport function login(email, password) {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      try {\n        if (res.ok) {\n          return res.json()\n        }\n        if (res.status === 400) {\n          throw new Error('Не верно заполнено одно из полей')\n        }\n        if (res.status === 401) {\n          throw new Error('Пользователь с данным email не найден ')\n        }\n      } catch (error) {\n        console.log(error)\n        return error\n      }\n    })\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token)\n        return data\n      }\n    })\n    .catch((error) => {\n      return Promise.reject(error.message)\n    })\n}\n\nexport function register(email, password) {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      try {\n        if (res.status !== 400) {\n          return res.json()\n        }\n      } catch (error) {\n        throw new Error('Некорректно заполнено одно из полей')\n      }\n    })\n    .then((res) => {\n      return res\n    })\n    .catch((error) =>\n      console.log(error + { message: 'Некорректно заполнено одно из полей' })\n    )\n}\n\nexport function getContent(token) {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => {\n      try {\n        if (res.status === 200) {\n          return res.json()\n        }\n        if (res.status === 400) {\n          throw new Error('Токен не передан или передан не в том формате')\n        }\n        if (res.status === 401) {\n          throw new Error('Переданный токен некорректен')\n        }\n      } catch (error) {\n        console.log(error)\n        return error\n      }\n    })\n    .then((data) => {\n      return data\n    })\n    .catch((error) => console.log(error))\n}\n","import { useContext } from 'react'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nexport default function Card({ card, onCardClick, onCardLike, onCardDelete }) {\n  const currentUser = useContext(CurrentUserContext)\n\n  function handleClick() {\n    onCardClick(card)\n  }\n\n  function handleClickLike() {\n    onCardLike(card)\n  }\n\n  function handleClickDelete() {\n    onCardDelete(card)\n  }\n\n  const isOwn = card.owner === currentUser._id\n  const isLiked = card.likes.some(i => i === currentUser._id)\n\n  const cardDeleteButtonClassName = `card__delete ${isOwn && 'show-block'}`\n  const cardLikeButtonClassName = `card__like ${isLiked && 'card__like_active'}`\n\n  return (\n    <li className='card'>\n      <button\n        onClick={handleClickDelete}\n        className={cardDeleteButtonClassName}\n        type='button'\n      />\n      <img\n        onClick={handleClick}\n        className='card__img'\n        alt={card.name}\n        src={card.link}\n      />\n      <div className='card__description'>\n        <h2 className='card__title'>{card.name}</h2>\n        <div className='card__container'>\n          <button\n            className={cardLikeButtonClassName}\n            type='button'\n            onClick={handleClickLike}\n          />\n          <span className='card__like-count'>{card.likes.length}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import { useContext } from 'react'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nimport Card from './Card.js'\n\nexport default function Main({\n  onEditAvatar,\n  onEditProfile,\n  onCardDelete,\n  onAddPlace,\n  cards,\n  onCardClick,\n  onCardLike,\n}) {\n  const currentUser = useContext(CurrentUserContext)\n\n  return (\n    <main className='main'>\n      <section className='profile'>\n        <div className='profile__info'>\n          <div className='profile__container'>\n            <img\n              src={currentUser.avatar}\n              alt='аватар'\n              className='profile__avatar'\n            />\n            <button onClick={onEditAvatar} className='profile__avatar-btn' />\n          </div>\n          <div className='profile__about'>\n            <h1 className='profile__name'>{currentUser.name}</h1>\n            <p className='profile__description'>{currentUser.about}</p>\n          </div>\n          <button\n            onClick={onEditProfile}\n            className='profile__edit'\n            type='button'\n          />\n        </div>\n        <button onClick={onAddPlace} className='profile__add' type='button' />\n      </section>\n      <section className='gallery'>\n        <ul className='cards'>\n          {cards.map((card) => (\n            <Card\n              key={card._id}\n              card={card}\n              onCardClick={onCardClick}\n              onCardDelete={onCardDelete}\n              onCardLike={onCardLike}\n            />\n          )).reverse()}\n        </ul>\n      </section>\n    </main>\n  )\n}\n","import { Route, Link } from 'react-router-dom'\n\nexport default function Header({ email, onSignOut }) {\n  return (\n    <header className='header'>\n      <div className='header__logo' />\n      <Route path='/sign-up'>\n        <Link className='header__auth_link' to='/sign-in'>\n          Войти\n        </Link>\n      </Route>\n      <Route path='/sign-in'>\n        <Link className='header__auth_link' to='/sign-up'>\n          Регистрация\n        </Link>\n      </Route>\n      <Route exact path='/'>\n        <div className='header__auth'>\n          <p className='header__auth_email'>{email}</p>\n          <button\n            className='header__auth_btn'\n            onClick={onSignOut}\n            type='button'\n          >\n            Выйти\n          </button>\n        </div>\n      </Route>\n    </header>\n  )\n}\n","export default function Footer() {\n  return (\n    <footer className='footer'>\n      <p className='footer__copyright'>\n        © {new Date().getFullYear()} Mesto Russia\n      </p>\n    </footer>\n  )\n}\n","export default function ImagePopup({ card, isClose }) {\n  return (\n    <section\n      className={`popup popup_type_open-photo ${card.link && 'popup_opened'}`}\n    >\n      <div className='popup__container popup__container_type_open-photo'>\n        <img className='popup__img' src={`${card.link}`} alt={card.name} />\n        <h2 className='popup__name'>{card.name}</h2>\n        <button onClick={isClose} type='button' className='popup__close' />\n      </div>\n    </section>\n  )\n}\n","export default function PopupWithForm({\n  name,\n  title,\n  isOpen,\n  onClose,\n  children,\n  onSubmit,\n  buttonText,\n}) {\n  return (\n    <section className={`popup popup_type_${name} ${isOpen && 'popup_opened'}`}>\n      <div className='popup__container'>\n        <h2 className='popup__title'>{title}</h2>\n        <form\n          action='#'\n          method='POST'\n          className='popup__form'\n          onSubmit={onSubmit}\n          name={name}\n        >\n          {children}\n          <button\n            type='submit'\n            defaultValue='Сохранить'\n            className='popup__save'\n            name='btn-add-profile'\n          >\n            {buttonText}\n          </button>\n        </form>\n        <button type='button' className='popup__close' onClick={onClose} />\n      </div>\n    </section>\n  )\n}\n","import { useState, useEffect } from 'react'\n\nimport PopupWithForm from './PopupWithForm'\n\nexport default function AddPlacePopup({\n  isOpen,\n  onClose,\n  onAddPlace,\n  isLoading,\n}) {\n  const [title, setTitle] = useState('')\n  const [link, setLink] = useState('')\n\n  useEffect(() => {\n    setTitle('')\n    setLink('')\n  }, [isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onAddPlace({\n      name: title,\n      link: link,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      title='Новое место'\n      name='add'\n      buttonText={isLoading ? 'Сохранение...' : 'Cоздать'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <label htmlFor='card-name-input' className='popup__label'>\n        <input\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          type='text'\n          placeholder='Название'\n          className='popup__input popup__input_string_card-name'\n          name='name'\n          required\n          minLength='2'\n          maxLength='30'\n          id='card-name-input'\n        />\n        <span className='popup__input-error card-name-input-error' />\n      </label>\n      <label htmlFor='card-link-input' className='popup__label'>\n        <input\n          value={link}\n          onChange={(e) => setLink(e.target.value)}\n          type='url'\n          placeholder='Ссылка на картинку'\n          className='popup__input popup__input_string_card-link'\n          name='link'\n          required\n          id='card-link-input'\n        />\n        <span className='popup__input-error card-link-input-error' />\n      </label>\n    </PopupWithForm>\n  )\n}\n","import { useEffect, useRef } from 'react'\n\nimport PopupWithForm from './PopupWithForm'\n\nexport default function EditAvatarPopup({\n  onUpdateAvatar,\n  isOpen,\n  onClose,\n  isLoading,\n}) {\n  const avatarRef = useRef('')\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    })\n  }\n\n  useEffect(() => {\n    avatarRef.current.value = ''\n  }, [isOpen])\n\n  return (\n    <PopupWithForm\n      title='Обновить аватар'\n      name='update'\n      buttonText={isLoading ? 'Сохранение...' : 'Сохранить'}\n      onSubmit={handleSubmit}\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <label htmlFor='card-link-input-avatar' className='popup__label'>\n        <input\n          ref={avatarRef}\n          type='url'\n          placeholder='Ссылка на картинку'\n          className='popup__input popup__input_string_card-link'\n          name='avatar'\n          required\n          id='card-link-input-avatar'\n        />\n        <span className='popup__input-error card-link-input-avatar-error' />\n      </label>\n    </PopupWithForm>\n  )\n}\n","import { useState, useEffect, useContext } from 'react'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nimport PopupWithForm from './PopupWithForm'\n\nexport default function EditProfilePopup({\n  onUpdateProfile,\n  isOpen,\n  onClose,\n  isLoading,\n}) {\n  const currentUser = useContext(CurrentUserContext)\n  const [name, setName] = useState('')\n  const [about, setAbout] = useState('')\n\n  function handleUpdateName(e) {\n    setName(e.target.value)\n  }\n\n  function handleUpdateAbout(e) {\n    setAbout(e.target.value)\n  }\n\n  useEffect(() => {\n    setName(currentUser.name)\n    setAbout(currentUser.about)\n  }, [currentUser, isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onUpdateProfile({\n      name: name,\n      about: about,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      title='Редактировать профиль'\n      name='edit'\n      buttonText={isLoading ? 'Сохранение...' : 'Сохранить'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <label htmlFor='name-input' className='popup__label'>\n        <input\n          type='text'\n          placeholder='Имя'\n          className='popup__input popup__input_string_name'\n          onChange={handleUpdateName}\n          value={name || ''}\n          name='name'\n          required\n          minLength='2'\n          maxLength='40'\n          id='name-input'\n        />\n        <span className='popup__input-error name-input-error' />\n      </label>\n      <label htmlFor='job-input' className='popup__label'>\n        <input\n          type='text'\n          placeholder='О себе'\n          className='popup__input popup__input_string_job'\n          onChange={handleUpdateAbout}\n          value={about ? about : ''}\n          name='about'\n          required\n          minLength='2'\n          maxLength='200'\n          id='job-input'\n        />\n        <span className='popup__input-error job-input-error' />\n      </label>\n    </PopupWithForm>\n  )\n}\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\n\nexport default function ProtectedRoute({ component: Component, ...props }) {\n  return (\n    <Route>\n      {() =>\n        props.loggedIn ? <Component {...props} /> : <Redirect to='/sign-in' />\n      }\n    </Route>\n  )\n}\n","export default function AuthForm({\n  title,\n  btnText,\n  email,\n  password,\n  handleChangeEmail,\n  handleChangePassword,\n  handleSubmit,\n  children\n}) {\n  return (\n    <section className='auth'>\n      <form className='auth__form' onSubmit={handleSubmit}>\n        <h3 className='auth__title'>{title}</h3>\n        <fieldset className='auth__field'>\n          <input\n            name='email'\n            type='email'\n            pattern='\\S+@\\S+\\.\\S+'\n            className='auth__input'\n            value={email || ''}\n            onChange={handleChangeEmail}\n            placeholder='Email'\n            required\n          />\n          <input\n            name='password'\n            type='password'\n            className='auth__input'\n            value={password || ''}\n            onChange={handleChangePassword}\n            required\n            placeholder='Пароль'\n            minLength='8'\n            autoComplete='off'\n          />\n        </fieldset>\n        <button className='auth__btn' type='submit'>\n          {btnText}\n        </button>\n        {children}\n      </form>\n    </section>\n  )\n}\n","import { useState } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport AuthForm from './AuthForm'\n\nexport default function Register({ onRegister }) {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value)\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    onRegister(email, password)\n  }\n\n  return (\n    <AuthForm\n      title='Регистрация'\n      btnText='Зарегистрироваться'\n      email={email}\n      password={password}\n      handleChangeEmail={handleChangeEmail}\n      handleChangePassword={handleChangePassword}\n      handleSubmit={handleSubmit}\n    >\n      <Link to='/sign-in' className='auth__link'>\n        Уже зарегистрированы? Войти\n      </Link>\n    </AuthForm>\n  )\n}\n","import { useState } from 'react'\nimport AuthForm from './AuthForm'\n\nexport default function Login({ onLogin }) {\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value)\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    if (!email || !password) {\n      return\n    }\n    onLogin(email, password)\n  }\n\n  return (\n    <AuthForm\n      title='Вход'\n      btnText='Войти'\n      email={email}\n      password={password}\n      handleChangeEmail={handleChangeEmail}\n      handleChangePassword={handleChangePassword}\n      handleSubmit={handleSubmit}\n    />\n  )\n}\n","export default __webpack_public_path__ + \"static/media/ok.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/err.df8eddf6.svg\";","import okIcon from '../images/ok.svg'\nimport errIcon from '../images/err.svg'\n\nexport default function InfoTooltip({ isOpen, onClose, isSuccess }) {\n  return (\n    <section className={`popup popup__tooltip ${isOpen && 'popup_opened'}`}>\n      <div className='popup__container popup__container_type_tooltip'>\n        <button\n          onClick={onClose}\n          className='popup__close popup__close_type_tooltip'\n          type='button'\n          aria-label='Закрыть'\n        />\n        <img\n          className='popup__res'\n          src={isSuccess.res ? okIcon : errIcon}\n          alt={isSuccess.res ? 'успешно' : 'ошибка'}\n        />\n        <h3 className='popup__msg'>\n          {isSuccess.msg}\n        </h3>\n      </div>\n    </section>\n  )\n}\n","import { useState, useEffect, useCallback } from 'react'\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport { api } from '../utils/api'\nimport { login, register, getContent } from '../utils/auth'\n\nimport Main from './Main'\nimport Header from './Header'\nimport Footer from './Footer'\n\nimport ImagePopup from './ImagePopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport EditProfilePopup from './EditProfilePopup'\n\nimport ProtectedRoute from './ProtectedRoute'\nimport Register from './Register'\nimport Login from './Login'\n\nimport InfoTooltip from './InfoTooltip'\n\nexport default function App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false)\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false)\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false)\n  const [selectedCard, setSelectedCard] = useState({ name: '', link: '' })\n  const [currentUser, setCurrentUser] = useState({})\n  const [cards, setCards] = useState([])\n\n  const [loggedIn, setLoggedIn] = useState(false)\n  const [infoTooltipPopup, setInfoTooltipPopup] = useState(false)\n  const [isSuccess, setIsSuccess] = useState({ res: false, msg: '' })\n  const [email, setEmail] = useState('')\n  const history = useHistory()\n\n  const [isLoading, setIsLoading] = useState(false)\n\n  useEffect(() => {\n    if (loggedIn) {\n      api\n      .getServerData()\n      .then(([userData, initialCards]) => {\n        setCurrentUser(userData)\n        setCards(initialCards)\n      })\n      .catch((error) => console.log(error))\n    }\n  }, [loggedIn])\n\n  function handleConfirmRegister(bool, msg) {\n    setInfoTooltipPopup(true)\n    setIsSuccess({ res: bool, msg: msg })\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setInfoTooltipPopup(false)\n    setSelectedCard({ name: '', link: '' })\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleUpdateAvatar(data) {\n    setIsLoading(true)\n    api\n      .updateAvatar(data)\n      .then((res) => {\n        setCurrentUser(res)\n        closeAllPopups()\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n      .finally(() => setIsLoading(false))\n  }\n\n  function handleUpdateUser(data) {\n    setIsLoading(true)\n    api\n      .setUserInfo(data)\n      .then((res) => {\n        setCurrentUser(res)\n        closeAllPopups()\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n      .finally(() => setIsLoading(false))\n  }\n\n  function handleDeleteCard(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards(cards => cards.filter(c => c._id !== card._id))\n      })\n      .catch((error) => console.log(error))\n  }\n\n  function handleLikeCard(card) {\n    const isLiked = card.likes.some(i => i === currentUser._id)\n\n    api\n      .likeCard(card._id, !isLiked)\n      .then((newCard) => {\n        setCards(cards => cards.map(c => c._id === card._id ? newCard : c))\n      })\n      .catch((error) => console.log(error))\n  }\n\n  function handleAddPlaceSubmit(item) {\n    setIsLoading(true)\n    api\n      .addCard(item)\n      .then((res) => {\n        console.log(res)\n        console.log(cards)\n\n        setCards([...cards, res.card])\n        closeAllPopups()\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n      .finally(() => setIsLoading(false))\n  }\n\n  function handleLogin(email, password) {\n    login(email, password)\n      .then((data) => {\n        if (data.token) {\n          setEmail(email)\n          setLoggedIn(true)\n          history.push('/')\n        }\n      })\n      .catch((err) => {\n        console.log(err.message)\n      })\n  }\n\n  function handleRegister(email, password) {\n    register(email, password)\n      .then((res) => {\n        if (res.message) {\n          handleConfirmRegister(false, 'Что-то пошло не так! Попробуйте ещё раз.')\n          history.push('/sign-in')\n        } else {\n          handleConfirmRegister(true, 'Вы зарегистрированы!')\n        }\n      })\n      .catch((err) => {\n        console.log(err.message)\n      })\n  }\n\n  function onSignOut() {\n    localStorage.removeItem('jwt')\n    history.push('/')\n    setEmail('')\n    setLoggedIn(false)\n  }\n\n  const tokenCheck = useCallback(() => {\n    const jwt = localStorage.getItem('jwt')\n    if (jwt) {\n      getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true)\n            setEmail(res.email)\n            history.push('/')\n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n      history.push('/sign-in')\n    }\n  }, [history])\n\n  useEffect(() => {\n    tokenCheck()\n  }, [tokenCheck])\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className='page'>\n        <Header email={email} onSignOut={onSignOut} />\n\n        <Switch>\n          <Route path='/sign-in'>\n            <Login onLogin={handleLogin} />\n          </Route>\n          <Route path='/sign-up'>\n            <Register onRegister={handleRegister} />\n          </Route>\n          <ProtectedRoute\n            path='/'\n            loggedIn={loggedIn}\n            component={Main}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleLikeCard}\n            onCardDelete={handleDeleteCard}\n          />\n          <Route path='/'>\n            {loggedIn ? <Redirect to='/' /> : <Redirect to='/sign-in' />}\n          </Route>\n        </Switch>\n\n        <InfoTooltip\n          isOpen={infoTooltipPopup}\n          onClose={closeAllPopups}\n          isSuccess={isSuccess}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateProfile={handleUpdateUser}\n          isLoading={isLoading}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          isLoading={isLoading}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          isLoading={isLoading}\n        />\n        <ImagePopup card={selectedCard} isClose={closeAllPopups} />\n\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './components/App'\n\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}